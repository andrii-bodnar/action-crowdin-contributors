{"version":3,"file":"index.js","sources":["../src/main.ts"],"sourcesContent":["import * as core from '@actions/core';\nimport * as dotenv from 'dotenv';\nimport { ContributorsTableConfig, CredentialsConfig } from './config';\nimport { Contributors } from './contributors';\n\ndotenv.config();\n\nasync function run(): Promise<void> {\n  try {\n    const tableConfig: ContributorsTableConfig = {\n      maxContributors: +core.getInput('max_contributors'),\n      minWordsContributed: +core.getInput('min_words_contributed'),\n      contributorsPerLine: +core.getInput('contributors_per_line'),\n      imageSize: +core.getInput('image_size'),\n      crowdinProjectLink: core.getInput('crowdin_project_link').trim(),\n      includeLanguages: core.getInput('include_languages') === 'true',\n      files: core.getMultilineInput('files'),\n      placeholderStart: core.getInput('placeholder_start'),\n      placeholderEnd: core.getInput('placeholder_end'),\n    };\n\n    const credentialsConfig: CredentialsConfig = {\n      projectId: 0,\n      token: '',\n      organization: '',\n    };\n\n    if (process.env.CROWDIN_PROJECT_ID) {\n      credentialsConfig.projectId = +process.env.CROWDIN_PROJECT_ID;\n    }\n\n    if (process.env.CROWDIN_PERSONAL_TOKEN) {\n      credentialsConfig.token = process.env.CROWDIN_PERSONAL_TOKEN;\n      core.setSecret(String(credentialsConfig.token));\n    }\n\n    if (process.env.CROWDIN_ORGANIZATION) {\n      credentialsConfig.organization = process.env.CROWDIN_ORGANIZATION;\n      core.setSecret(String(credentialsConfig.organization));\n    }\n\n    validateCredentials(credentialsConfig);\n\n    const contributors = new Contributors(credentialsConfig, tableConfig);\n\n    await contributors.generate();\n  } catch (error) {\n    if (error instanceof Error) core.setFailed(error.message);\n  }\n}\n\nfunction validateCredentials(credentialsConfig: CredentialsConfig): void {\n  if (credentialsConfig.projectId && credentialsConfig.token) {\n    return;\n  }\n\n  const missingVariables = [];\n\n  if (!credentialsConfig.projectId) {\n    missingVariables.push('CROWDIN_PROJECT_ID');\n  }\n\n  if (!credentialsConfig.token) {\n    missingVariables.push('CROWDIN_PERSONAL_TOKEN');\n  }\n\n  throw Error('Missing environment variable(s): ' + missingVariables.join(', '));\n}\n\nrun();\n"],"names":[],"mappings":";;AAAA,MAAA,IAAA,GAAA,OAAA,CAAA,YAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;AAEA,MAAA,cAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;AAEA,MAAM,CAAC,MAAM,EAAE;AAEf,eAAe,GAAG,GAAA;AAChB,IAAA,IAAI;AACF,QAAA,MAAM,WAAW,GAA4B;AAC3C,YAAA,eAAe,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC;AACnD,YAAA,mBAAmB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;AAC5D,YAAA,mBAAmB,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC;AAC5D,YAAA,SAAS,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;YACvC,kBAAkB,EAAE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC,IAAI,EAAE;YAChE,gBAAgB,EAAE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,MAAM;AAC/D,YAAA,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;AACtC,YAAA,gBAAgB,EAAE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC;AACpD,YAAA,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC;SACjD;AAED,QAAA,MAAM,iBAAiB,GAAsB;AAC3C,YAAA,SAAS,EAAE,CAAC;AACZ,YAAA,KAAK,EAAE,EAAE;AACT,YAAA,YAAY,EAAE,EAAE;SACjB;AAED,QAAA,IAAI,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE;YAClC,iBAAiB,CAAC,SAAS,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB;QAC/D;AAEA,QAAA,IAAI,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE;YACtC,iBAAiB,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,sBAAsB;YAC5D,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QACjD;AAEA,QAAA,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE;YACpC,iBAAiB,CAAC,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,oBAAoB;YACjE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;QACxD;QAEA,mBAAmB,CAAC,iBAAiB,CAAC;QAEtC,MAAM,YAAY,GAAG,IAAI,cAAA,CAAA,YAAY,CAAC,iBAAiB,EAAE,WAAW,CAAC;AAErE,QAAA,MAAM,YAAY,CAAC,QAAQ,EAAE;IAC/B;IAAE,OAAO,KAAK,EAAE;QACd,IAAI,KAAK,YAAY,KAAK;AAAE,YAAA,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC;IAC3D;AACF;AAEA,SAAS,mBAAmB,CAAC,iBAAoC,EAAA;IAC/D,IAAI,iBAAiB,CAAC,SAAS,IAAI,iBAAiB,CAAC,KAAK,EAAE;QAC1D;IACF;IAEA,MAAM,gBAAgB,GAAG,EAAE;AAE3B,IAAA,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;AAChC,QAAA,gBAAgB,CAAC,IAAI,CAAC,oBAAoB,CAAC;IAC7C;AAEA,IAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE;AAC5B,QAAA,gBAAgB,CAAC,IAAI,CAAC,wBAAwB,CAAC;IACjD;IAEA,MAAM,KAAK,CAAC,mCAAmC,GAAG,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChF;AAEA,GAAG,EAAE"}